#include "bendeventtest.h"

BendEventTest::BendEventTest()
{

}

BendEventTest::~BendEventTest()
{

}

void BendEventTest::bendEventTest1()
{
    polygon = Polygon();
    polygon.push_back(Point(6.0, 12.0));
    polygon.push_back(Point(12.0, 12.0));
    polygon.push_back(Point(12.0, 9.0));
    polygon.push_back(Point(14.0, 7.0));
    polygon.push_back(Point(16.0, 7.0));
    polygon.push_back(Point(17.0, 9.0));
    polygon.push_back(Point(17.0, 12.0));
    polygon.push_back(Point(21.0, 12.0));
    polygon.push_back(Point(21.0, 8.0));
    polygon.push_back(Point(18.0, 8.0));
    polygon.push_back(Point(21.0, 5.0));
    polygon.push_back(Point(16.0, 6.0));
    polygon.push_back(Point(14.0, 3.0));
    polygon.push_back(Point(13.0, 5.0));
    polygon.push_back(Point(10.0, 5.0));
    polygon.push_back(Point(11.0, 9.0));
    polygon.push_back(Point(8.0, 8.0));
    polygon.push_back(Point(8.0, 10.0));
    polygon.push_back(Point(6.0, 10.0));
    shortestPath = new SPV::ShortestPath();
    shortestPath->initialize(polygon);
    shortestPath->setPoint(0, 11.0, 11.0);
    shortestPath->setPoint(1, 19.0, 11.0);

    std::vector<SPV::PointOnShortestPath*> sP = shortestPath->calculateShortestPath();
    SPV::EventSegment *eS = shortestPath->getFirstEvent();
    SPV::BendEventCalculator *bC = new SPV::BendEventCalculator(eS, sP);
    bC->calculateBendEvents();

    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(12,9));
    SPV::LineOfSight *loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(loS->getPointOnStartSide() , Point(10.5,12));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(14.5714, 3.8571)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(loS->getPointOnStartSide(), Point(9,12));
    QCOMPARE(loS->getPointOnEndSide(), Point(15.6, 5.4));
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(12,9));
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(loS->getPointOnStartSide() , Point(9,12));
    QCOMPARE(loS->getPointOnEndSide(), Point(15.6, 5.4));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(7.3333,12)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(15.7778, 5.6667)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(7.3333,12)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(15.7778, 5.6667)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(loS->getPointOnStartSide(), Point(6.5,12));
     QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(15.8461, 5.7692)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(loS->getPointOnStartSide() , Point(11,9));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(15.8461, 5.7692)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(10.9578, 8.8311)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(15.9031, 5.8546)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnStartSide().at(0), Point(11,9)), true);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(10.9578, 8.8311)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(15.9031, 5.8546)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(10.8888, 8.5555)), true);
    QCOMPARE(loS->getPointOnEndSide(), Point(16, 6));
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnStartSide().at(0), Point(11,9)), true);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(10.8888, 8.5555)), true);
    QCOMPARE(loS->getPointOnEndSide(), Point(16, 6));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(10.8237, 8.2949)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(16.8891, 5.8222)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnStartSide().at(0), Point(11,9)), true);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(10.8237, 8.2949)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(16.8891, 5.8222)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(10.7692, 8.0769)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(18.5, 5.5)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnStartSide().at(0), Point(11,9)), true);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(10.7692, 8.0769)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(18.5, 5.5)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(10.7333, 7.9333)), true);
    QCOMPARE(loS->getPointOnEndSide(), Point(21, 5));
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnStartSide().at(0), Point(11,9)), true);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnEndSide().at(0), Point(18,8)), true);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(10.7333, 7.9333)), true);
    QCOMPARE(loS->getPointOnEndSide(), Point(21, 5));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(10.7059, 7.8235)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(20.6667, 5.3333)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnStartSide().at(0), Point(11,9)), true);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnEndSide().at(0), Point(18,8)), true);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(10.7059, 7.8235)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(20.6667, 5.3333)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(loS->getPointOnStartSide(), Point(10.5, 7));
    QCOMPARE(loS->getPointOnEndSide(), Point(19, 7));
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnStartSide().at(0), Point(11,9)), true);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnEndSide().at(0), Point(18,8)), true);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(16,7));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(loS->getPointOnStartSide(), Point(10.5, 7));
    QCOMPARE(loS->getPointOnEndSide(), Point(19, 7));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(loS->getPointOnStartSide(), Point(10, 5));
    QCOMPARE(loS->getPointOnEndSide(), Point(18.25, 7.75));
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnEndSide().at(0), Point(18,8)), true);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(16,7));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(loS->getPointOnStartSide(), Point(10, 5));
    QCOMPARE(loS->getPointOnEndSide(), Point(18.25, 7.75));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(loS->getPointOnStartSide(), Point(12, 5));
    QCOMPARE(loS->getPointOnEndSide(), Point(18, 8));
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnEndSide().at(0), Point(18,8)), true);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(16,7));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(loS->getPointOnStartSide(), Point(12, 5));
    QCOMPARE(loS->getPointOnEndSide(), Point(21, 9.5));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(loS->getPointOnStartSide(), Point(13, 5));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21, 10.3333)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(16,7));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(loS->getPointOnStartSide(), Point(13, 5));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21, 10.3333)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(13.3333, 4.3333)), true);
    QCOMPARE(loS->getPointOnEndSide(), Point(21, 12));
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(16,7));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(13.3333, 4.3333)), true);
    QCOMPARE(loS->getPointOnEndSide(), Point(21, 12));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(loS->getPointOnStartSide(), Point(13.6, 3.8));
    QCOMPARE(loS->getPointOnEndSide(), Point(19.75, 12));
    QCOMPARE(eS->hasSuccessor(), false);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 2);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    delete bC;
}

void BendEventTest::bendEventTest2()
{
    polygon = Polygon();
    polygon.push_back(Point(6.0, 12.0));
    polygon.push_back(Point(12.0, 12.0));
    polygon.push_back(Point(12.0, 9.0));
    polygon.push_back(Point(14.0, 7.0));
    polygon.push_back(Point(16.0, 7.0));
    polygon.push_back(Point(17.0, 9.0));
    polygon.push_back(Point(17.0, 12.0));
    polygon.push_back(Point(21.0, 12.0));
    polygon.push_back(Point(21.0, 8.0));
    polygon.push_back(Point(18.0, 8.0));
    polygon.push_back(Point(21.0, 5.0));
    polygon.push_back(Point(16.0, 6.0));
    polygon.push_back(Point(14.0, 3.0));
    polygon.push_back(Point(13.0, 5.0));
    polygon.push_back(Point(10.0, 5.0));
    polygon.push_back(Point(11.0, 9.0));
    polygon.push_back(Point(8.0, 8.0));
    polygon.push_back(Point(8.0, 10.0));
    polygon.push_back(Point(6.0, 10.0));
    shortestPath = new SPV::ShortestPath();
    shortestPath->initialize(polygon);
    shortestPath->setPoint(0, 19.0, 11.0);
    shortestPath->setPoint(1, 11.0, 11.0);

    std::vector<SPV::PointOnShortestPath*> sP = shortestPath->calculateShortestPath();
    SPV::EventSegment *eS = shortestPath->getFirstEvent();
    SPV::BendEventCalculator *bC = new SPV::BendEventCalculator(eS, sP);
    bC->calculateBendEvents();

    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(16,7));
    SPV::LineOfSight *loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(13.3333, 4.3333)), true);
    QCOMPARE(loS->getPointOnStartSide(), Point(21, 12));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(loS->getPointOnEndSide(), Point(13.6, 3.8));
    QCOMPARE(loS->getPointOnStartSide(), Point(19.75, 12));
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 2);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(16,7));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(loS->getPointOnEndSide(), Point(13, 5));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21, 10.3333)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(13.3333, 4.3333)), true);
    QCOMPARE(loS->getPointOnStartSide(), Point(21, 12));
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(16,7));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(loS->getPointOnEndSide(), Point(12, 5));
    QCOMPARE(loS->getPointOnStartSide(), Point(21, 9.5));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(loS->getPointOnEndSide(), Point(13, 5));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21, 10.3333)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(16,7));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(loS->getPointOnEndSide(), Point(10, 5));
    QCOMPARE(loS->getPointOnStartSide(), Point(18.25, 7.75));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(loS->getPointOnEndSide(), Point(12, 5));
    QCOMPARE(loS->getPointOnStartSide(), Point(18, 8));
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnStartSide().at(0), Point(18,8)), true);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(16,7));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(loS->getPointOnEndSide(), Point(10.5, 7));
    QCOMPARE(loS->getPointOnStartSide(), Point(19, 7));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(loS->getPointOnEndSide(), Point(10, 5));
    QCOMPARE(loS->getPointOnStartSide(), Point(18.25, 7.75));
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnStartSide().at(0), Point(18,8)), true);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(10.7059, 7.8235)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(20.6667, 5.3333)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(loS->getPointOnEndSide(), Point(10.5, 7));
    QCOMPARE(loS->getPointOnStartSide(), Point(19, 7));
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnEndSide().at(0), Point(11,9)), true);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnStartSide().at(0), Point(18,8)), true);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(10.7333, 7.9333)), true);
    QCOMPARE(loS->getPointOnStartSide(), Point(21, 5));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(10.7059, 7.8235)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(20.6667, 5.3333)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnEndSide().at(0), Point(11,9)), true);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnStartSide().at(0), Point(18,8)), true);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(10.7692, 8.0769)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(18.5, 5.5)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(10.7333, 7.9333)), true);
    QCOMPARE(loS->getPointOnStartSide(), Point(21, 5));
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnEndSide().at(0), Point(11,9)), true);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnStartSide().at(0), Point(18,8)), true);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(10.8237, 8.2949)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(16.8891, 5.8222)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(10.7692, 8.0769)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(18.5, 5.5)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnEndSide().at(0), Point(11,9)), true);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(10.8888, 8.5555)), true);
    QCOMPARE(loS->getPointOnStartSide(), Point(16, 6));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(10.8237, 8.2949)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(16.8891, 5.8222)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnEndSide().at(0), Point(11,9)), true);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(10.9578, 8.8311)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(15.9031, 5.8546)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(10.8888, 8.5555)), true);
    QCOMPARE(loS->getPointOnStartSide(), Point(16, 6));
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnEndSide().at(0), Point(11,9)), true);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(loS->getPointOnEndSide() , Point(11,9));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(15.8461, 5.7692)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(10.9578, 8.8311)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(15.9031, 5.8546)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnEndSide().at(0), Point(11,9)), true);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(7.3333,12)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(15.7778, 5.6667)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(loS->getPointOnEndSide(), Point(6.5,12));
     QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(15.8461, 5.7692)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(loS->getPointOnEndSide() , Point(9,12));
    QCOMPARE(loS->getPointOnStartSide(), Point(15.6, 5.4));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(7.3333,12)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(15.7778, 5.6667)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(12,9));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(loS->getPointOnEndSide() , Point(10.5,12));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(14.5714, 3.8571)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(loS->getPointOnEndSide(), Point(9,12));
    QCOMPARE(loS->getPointOnStartSide(), Point(15.6, 5.4));
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(12,9));
    QCOMPARE(eS->hasSuccessor(), false);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    delete bC;
}

void BendEventTest::bendEventTest3()
{
    polygon = Polygon();
    polygon.push_back(Point(16.0, 12.0));
    polygon.push_back(Point(19.0, 12.0));
    polygon.push_back(Point(19.0, 7.0));
    polygon.push_back(Point(13.0, 7.0));
    polygon.push_back(Point(14.0, 5.0));
    polygon.push_back(Point(18.0, 5.0));
    polygon.push_back(Point(18.0, 3.0));
    polygon.push_back(Point(12.0, 3.0));
    polygon.push_back(Point(11.0, 5.0));
    polygon.push_back(Point(8.0, 5.0));
    polygon.push_back(Point(12.5, 6));
    polygon.push_back(Point(11.0, 8.0));
    polygon.push_back(Point(14.5, 7.5));
    polygon.push_back(Point(11.0, 12.0));
    polygon.push_back(Point(14.0, 12.0));
    polygon.push_back(Point(14.0, 10.0));
    polygon.push_back(Point(15.0, 8.0));
    polygon.push_back(Point(16.0, 10.0));
    shortestPath = new SPV::ShortestPath();
    shortestPath->initialize(polygon);
    shortestPath->setPoint(0, 17.0, 11.0);
    shortestPath->setPoint(1, 17.0, 4.0);

    std::vector<SPV::PointOnShortestPath*> sP = shortestPath->calculateShortestPath();
    SPV::EventSegment *eS = shortestPath->getFirstEvent();
    SPV::BendEventCalculator *bC = new SPV::BendEventCalculator(eS, sP);
    bC->calculateBendEvents();

    SPV::LineOfSight *loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(15,8));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(17.6666, 12)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(14.3333,7)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(19,12)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(14,7)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);

    eS = eS->getSuccessor();
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14.5,7.5));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(19,12)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(14,7)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(19,9)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(13,7)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);

    eS = eS->getSuccessor();
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(13,7));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(14.5,7.5)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(12,6.6666)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(14.1111,7.5556)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(12.0909,6.5455)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 2);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(13,7));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(14.1111,7.5556)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(12.0909,6.5455)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(13.4614, 7.6484)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(12.3914,6.1448)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 2);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(13,7));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(13.4614, 7.6484)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(12.3914,6.1448)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(13.3333, 7.6666)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(12.5,6)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 2);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(13,7));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(13.3333, 7.6666)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(11.5,4)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(13.2273, 7.6818)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(11.8,3.4)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 2);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(13,7));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(13.2273, 7.6818)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(11.8,3.4)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(13.1724, 7.6897)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(12,3)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 2);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 5);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(13,7));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(13.1724, 7.6897)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(12,3)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(13.1, 7.7)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(12.4286,3)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 2);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 5);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(13,7));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(13.1, 7.7)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(12.4286,3)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(12.75, 7.75)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(14.3333,3)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 2);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 5);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(13,7));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(12.75, 7.75)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(14.3333,3)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(12.6154, 7.7692)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(15,3)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 5);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,5));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(12.6154, 7.7692)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(15,3)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(11, 8)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(16,3)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 5);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,5));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(11, 8)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(16,3)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(12.3914, 6.1448)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(16.8102,3)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 5);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,5));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(12.3914, 6.1448)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(16.8102,3)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(12.5, 6)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(17,3)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 5);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,5));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(12.5, 6)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(17,3)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(12.1538, 5.9231)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(18,3)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnStartSide().at(0), Point(12.5,6)), true);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 5);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,5));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(12.1538, 5.9231)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(18,3)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(11.6, 5.8)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(18,3.6666)), true);
    QCOMPARE(eS->hasSuccessor(), false);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 5);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    delete bC;
}

void BendEventTest::bendEventTest4()
{
    polygon = Polygon();
    polygon.push_back(Point(16.0, 12.0));
    polygon.push_back(Point(19.0, 12.0));
    polygon.push_back(Point(19.0, 7.0));
    polygon.push_back(Point(13.0, 7.0));
    polygon.push_back(Point(14.0, 5.0));
    polygon.push_back(Point(18.0, 5.0));
    polygon.push_back(Point(18.0, 3.0));
    polygon.push_back(Point(12.0, 3.0));
    polygon.push_back(Point(11.0, 5.0));
    polygon.push_back(Point(8.0, 5.0));
    polygon.push_back(Point(12.5, 6));
    polygon.push_back(Point(11.0, 8.0));
    polygon.push_back(Point(14.5, 7.5));
    polygon.push_back(Point(11.0, 12.0));
    polygon.push_back(Point(14.0, 12.0));
    polygon.push_back(Point(14.0, 10.0));
    polygon.push_back(Point(15.0, 8.0));
    polygon.push_back(Point(16.0, 10.0));
    shortestPath = new SPV::ShortestPath();
    shortestPath->initialize(polygon);
    shortestPath->setPoint(0, 17.0, 4.0);
    shortestPath->setPoint(1, 17.0, 11.0);

    std::vector<SPV::PointOnShortestPath*> sP = shortestPath->calculateShortestPath();
    SPV::EventSegment *eS = shortestPath->getFirstEvent();
    SPV::BendEventCalculator *bC = new SPV::BendEventCalculator(eS, sP);
    bC->calculateBendEvents();

    SPV::LineOfSight *loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,5));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(12.1538, 5.9231)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(18,3)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(11.6, 5.8)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(18,3.6666)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 2);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,5));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(12.5, 6)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(17,3)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(12.1538, 5.9231)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(18,3)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 2);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnEndSide().at(0), Point(12.5,6)), true);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,5));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(12.3914, 6.1448)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(16.8102,3)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(12.5, 6)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(17,3)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 2);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,5));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(11, 8)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(16,3)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(12.3914, 6.1448)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(16.8102,3)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 2);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,5));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(12.6154, 7.7692)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(15,3)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(11, 8)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(16,3)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 2);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(13,7));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(12.75, 7.75)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(14.3333,3)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(12.6154, 7.7692)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(15,3)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 2);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(13,7));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(13.1, 7.7)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(12.4286,3)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(12.75, 7.75)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(14.3333,3)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(13,7));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(13.1724, 7.6897)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(12,3)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(13.1, 7.7)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(12.4286,3)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(13,7));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(13.2273, 7.6818)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(11.8,3.4)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(13.1724, 7.6897)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(12,3)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(13,7));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(13.3333, 7.6666)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(11.5,4)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(13.2273, 7.6818)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(11.8,3.4)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(13,7));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(13.4614, 7.6484)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(12.3914,6.1448)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(13.3333, 7.6666)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(12.5,6)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(13,7));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(14.1111,7.5556)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(12.0909,6.5455)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(13.4614, 7.6484)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(12.3914,6.1448)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(13,7));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(14.5,7.5)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(12,6.6666)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(14.1111,7.5556)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(12.0909,6.5455)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 2);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14.5,7.5));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(19,12)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(14,7)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(19,9)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(13,7)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 5);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 2);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);

    eS = eS->getSuccessor();
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(15,8));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(17.6666, 12)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(14.3333,7)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(19,12)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(14,7)), true);
    QCOMPARE(eS->hasSuccessor(), false);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 5);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 2);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);
    delete bC;
}

void BendEventTest::bendEventTest5()
{
    polygon = Polygon();
    polygon.push_back(Point(6.0, 12.0));
    polygon.push_back(Point(12.0, 12.0));
    polygon.push_back(Point(12.0, 9.0));
    polygon.push_back(Point(13.0, 10.0));
    polygon.push_back(Point(13.0, 11.0));
    polygon.push_back(Point(15.0, 11.0));
    polygon.push_back(Point(14.0, 7.0));
    polygon.push_back(Point(15.0, 9.0));
    polygon.push_back(Point(17.0, 7.0));
    polygon.push_back(Point(21.0, 8.0));
    polygon.push_back(Point(21.0, 4.0));
    polygon.push_back(Point(17.0, 2.0));
    polygon.push_back(Point(11.5, 3.5));
    polygon.push_back(Point(10.0, 2.0));
    polygon.push_back(Point(7.0, 2.0));
    polygon.push_back(Point(8.5,3.5));
    polygon.push_back(Point(7.0, 3.5));
    polygon.push_back(Point(6.0, 5.0));
    polygon.push_back(Point(8.0, 6.0));
    polygon.push_back(Point(9.0, 4.0));
    polygon.push_back(Point(15.0, 4.0));
    polygon.push_back(Point(20.0, 5.0));
    polygon.push_back(Point(9.0, 5.0));
    polygon.push_back(Point(10.9, 8.3));
    polygon.push_back(Point(9.0, 7.0));
    polygon.push_back(Point(11.0, 9.0));
    polygon.push_back(Point(8.0, 8.0));
    polygon.push_back(Point(8.0, 10.0));
    polygon.push_back(Point(6.0, 10.0));
    shortestPath = new SPV::ShortestPath();
    shortestPath->initialize(polygon);
    shortestPath->setPoint(0, 10.5, 11.0);
    shortestPath->setPoint(1, 8.0, 5.0);
    std::vector<SPV::PointOnShortestPath*> sP = shortestPath->calculateShortestPath();
    SPV::EventSegment *eS = shortestPath->getFirstEvent();
    SPV::BendEventCalculator *bC = new SPV::BendEventCalculator(eS, sP);
    bC->calculateBendEvents();

    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(12,9));
    SPV::LineOfSight *loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(loS->getPointOnStartSide() , Point(9.75,12));
    QCOMPARE(loS->getPointOnEndSide(), Point(15, 5));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(loS->getPointOnStartSide(), Point(9,12));
    QCOMPARE(loS->getPointOnEndSide(), Point(16, 5));
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(loS->getPointOnStartSide(), Point(9,12));
    QCOMPARE(loS->getPointOnEndSide(), Point(16, 5));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(loS->getPointOnStartSide(), Point(6.5,12));
    QCOMPARE(loS->getPointOnEndSide(), Point(17, 5));
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(loS->getPointOnStartSide() , Point(11,9));
    QCOMPARE(loS->getPointOnEndSide(), Point(17, 5));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(10.4773, 8.4773)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(18.7692, 5)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().at(0), Point(11,9));
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(10.9, 8.3)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(18.7692, 5)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(10.7712, 8.0763)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(20, 5)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 2);
    QCOMPARE(eS->getExtraPointsOnStartSide().at(0), Point(11,9));
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnStartSide().at(1), Point(10.9,8.3)), true);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(20,5));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(loS->getPointOnStartSide(), Point(14, 7));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21.0, 4.6667)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(14.4, 7.8)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21, 4.5)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 2);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(20,5));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(14.4, 7.8)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21, 4.5)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(14.75, 8.5)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21, 4.3333)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 2);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(20,5));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(17, 7)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21, 4.3333)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(17.8, 7.2)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21, 4)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 2);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().at(0), Point(17,7));
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(20,5));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(17.8, 7.2)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21, 4)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(19.3529, 7.5882)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(20.3333, 3.6667)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 2);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().at(0), Point(17,7));
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(20,5));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(19.3529, 7.5882)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(20.3333, 3.6667)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(19.4762, 7.6191)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(20.2727, 3.6364)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 2);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().at(0), Point(17,7));
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(20,5));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(19.4762, 7.6191)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(20.2727, 3.6364)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(20, 7.75)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(20, 3.5)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 2);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().at(0), Point(17,7));
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);


    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(20,5));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(20, 7.75)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(20, 3.5)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(20.1371, 7.7843)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(19.9243, 3.4621)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 2);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 5);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(20,5));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(20.1371, 7.7843)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(19.9243, 3.4621)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21, 8)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(19.4, 3.2)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 2);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 5);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(20,5));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21, 8)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(19.4, 3.2)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21, 6.1177)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(17.5714, 2.2857)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 5);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(20,5));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21, 6.1177)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(17.5714, 2.2857)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21, 6)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(17, 2)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 5);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(eS->getExtraPointsOnEndSide().at(0), Point(11.5,3.5));
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(20,5));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21, 6)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(17, 2)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21, 5.2)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(11.9231, 3.3846)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 5);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(eS->getExtraPointsOnEndSide().at(0), Point(11.5,3.5));
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(15,4));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21, 5.2)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(11.9231, 3.3846)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21, 4.8571)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(11.5, 3.5)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 5);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(eS->getExtraPointsOnEndSide().at(0), Point(11.5,3.5));
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(15,4));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21, 4.8571)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(8.0, 3.0)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21, 4.4615)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(8.5,3.5)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 6);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(eS->getExtraPointsOnEndSide().at(0), Point(8.5,3.5));
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(15,4));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21, 4.4615)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(8.5,3.5)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21.0, 4.4353)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(8.1088,3.5)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 6);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(15,4));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21.0, 4.4353)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(8.1088,3.5)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21.0, 4.375)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(7.0,3.5)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 6);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(15,4));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21.0, 4.375)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(7,3.5)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21, 4.0)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(6.6667,4.0)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 6);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(9,4));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21, 4.0)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(6.6667,4.0)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(19.9243, 3.4621)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(6.5875,4.1188)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 6);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(9,4));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(19.9243, 3.4621)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(6.5875,4.1188)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(17.5714, 2.2857)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(6.3077,4.5385)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 6);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(9,4));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(11.5,3.5)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(6.3077,4.5385)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(11.25,3.25)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(6.0,5.0)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 4);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().at(0), Point(11.5,3.5));
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 6);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(9,4));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(11.25,3.25)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(6.0,5.0)), true);
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(10.5,2.5)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(7.3333,5.6667)), true);
    QCOMPARE(eS->hasSuccessor(), false);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 4);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().at(0), Point(11.5,3.5));
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 6);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    delete bC;
}

void BendEventTest::bendEventTest6()
{
    polygon = Polygon();
    polygon.push_back(Point(6.0, 12.0));
    polygon.push_back(Point(12.0, 12.0));
    polygon.push_back(Point(12.0, 9.0));
    polygon.push_back(Point(13.0, 10.0));
    polygon.push_back(Point(13.0, 11.0));
    polygon.push_back(Point(15.0, 11.0));
    polygon.push_back(Point(14.0, 7.0));
    polygon.push_back(Point(15.0, 9.0));
    polygon.push_back(Point(17.0, 7.0));
    polygon.push_back(Point(21.0, 8.0));
    polygon.push_back(Point(21.0, 4.0));
    polygon.push_back(Point(17.0, 2.0));
    polygon.push_back(Point(11.5, 3.5));
    polygon.push_back(Point(10.0, 2.0));
    polygon.push_back(Point(7.0, 2.0));
    polygon.push_back(Point(8.5,3.5));
    polygon.push_back(Point(7.0, 3.5));
    polygon.push_back(Point(6.0, 5.0));
    polygon.push_back(Point(8.0, 6.0));
    polygon.push_back(Point(9.0, 4.0));
    polygon.push_back(Point(15.0, 4.0));
    polygon.push_back(Point(20.0, 5.0));
    polygon.push_back(Point(9.0, 5.0));
    polygon.push_back(Point(10.9, 8.3));
    polygon.push_back(Point(9.0, 7.0));
    polygon.push_back(Point(11.0, 9.0));
    polygon.push_back(Point(8.0, 8.0));
    polygon.push_back(Point(8.0, 10.0));
    polygon.push_back(Point(6.0, 10.0));
    shortestPath = new SPV::ShortestPath();
    shortestPath->initialize(polygon);
    shortestPath->setPoint(0, 8.0, 5.0);
    shortestPath->setPoint(1, 10.5, 11.0);
    std::vector<SPV::PointOnShortestPath*> sP = shortestPath->calculateShortestPath();
    SPV::EventSegment *eS = shortestPath->getFirstEvent();
    SPV::BendEventCalculator *bC = new SPV::BendEventCalculator(eS, sP);
    bC->calculateBendEvents();

    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(9,4));
    SPV::LineOfSight *loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(11.25,3.25)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(6.0,5.0)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(10.5,2.5)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(7.3333,5.6667)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 2);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(eS->getExtraPointsOnEndSide().at(0), Point(11.5,3.5));
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(9,4));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(11.5,3.5)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(6.3077,4.5385)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(11.25,3.25)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(6.0,5.0)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 2);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(eS->getExtraPointsOnEndSide().at(0), Point(11.5,3.5));
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(9,4));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(19.9243, 3.4621)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(6.5875,4.1188)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(17.5714, 2.2857)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(6.3077,4.5385)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(9,4));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21, 4.0)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(6.6667,4.0)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(19.9243, 3.4621)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(6.5875,4.1188)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(15,4));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21.0, 4.375)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(7,3.5)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21, 4.0)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(6.6667,4.0)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(15,4));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21.0, 4.4353)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(8.1088,3.5)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21.0, 4.375)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(7.0,3.5)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(15,4));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21, 4.4615)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(8.5,3.5)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21.0, 4.4353)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(8.1088,3.5)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(15,4));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21, 4.8571)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(8.0, 3.0)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21, 4.4615)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(8.5,3.5)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 0);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().at(0), Point(8.5,3.5));
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(15,4));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21, 5.2)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(11.9231, 3.3846)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21, 4.8571)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(11.5, 3.5)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().at(0), Point(11.5,3.5));
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(20,5));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21, 6)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(17, 2)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21, 5.2)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(11.9231, 3.3846)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().at(0), Point(11.5,3.5));
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(20,5));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21, 6.1177)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(17.5714, 2.2857)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21, 6)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(17, 2)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().at(0), Point(11.5,3.5));
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(20,5));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21, 8)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(19.4, 3.2)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21, 6.1177)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(17.5714, 2.2857)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 3);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(20,5));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(20.1371, 7.7843)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(19.9243, 3.4621)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(21, 8)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(19.4, 3.2)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(20,5));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(20, 7.75)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(20, 3.5)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(20.1371, 7.7843)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(19.9243, 3.4621)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 1);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(20,5));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(19.4762, 7.6191)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(20.2727, 3.6364)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(20, 7.75)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(20, 3.5)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(eS->getExtraPointsOnEndSide().at(0), Point(17,7));
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 2);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(20,5));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(19.3529, 7.5882)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(20.3333, 3.6667)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(19.4762, 7.6191)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(20.2727, 3.6364)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(eS->getExtraPointsOnEndSide().at(0), Point(17,7));
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(20,5));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(17.8, 7.2)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21, 4)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(19.3529, 7.5882)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(20.3333, 3.6667)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(eS->getExtraPointsOnEndSide().at(0), Point(17,7));
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(20,5));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(17, 7)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21, 4.3333)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(17.8, 7.2)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21, 4)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(eS->getExtraPointsOnEndSide().at(0), Point(17,7));
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(20,5));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(14.4, 7.8)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21, 4.5)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(14.75, 8.5)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21, 4.3333)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(20,5));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(loS->getPointOnEndSide(), Point(14, 7));
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21.0, 4.6667)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(14.4, 7.8)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(21, 4.5)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 4);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), false);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), true);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), false);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(10.9, 8.3)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(18.7692, 5)), true);
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(10.7712, 8.0763)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(20, 5)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 6);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 2);
    QCOMPARE(eS->getExtraPointsOnEndSide().at(0), Point(11,9));
    QCOMPARE(gU.pointsAreEqual(eS->getExtraPointsOnEndSide().at(1), Point(10.9,8.3)), true);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(loS->getPointOnEndSide() , Point(11,9));
    QCOMPARE(loS->getPointOnStartSide(), Point(17, 5));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnEndSide(), Point(10.4773, 8.4773)), true);
    QCOMPARE(gU.pointsAreEqual(loS->getPointOnStartSide(), Point(18.7692, 5)), true);
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 6);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 1);
    QCOMPARE(eS->getExtraPointsOnEndSide().at(0), Point(11,9));
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);

    eS = eS->getSuccessor();
    QCOMPARE(eS->getPivotPoint()->getPoint(), Point(14,7));
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(loS->getPointOnEndSide(), Point(9,12));
    QCOMPARE(loS->getPointOnStartSide(), Point(16, 5));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(loS->getPointOnEndSide(), Point(6.5,12));
    QCOMPARE(loS->getPointOnStartSide(), Point(17, 5));
    QCOMPARE(eS->hasSuccessor(), true);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 6);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);

    eS = eS->getSuccessor();
    loS = eS->getSecondLineOfSightFromStart();
    QCOMPARE(loS->getPointOnEndSide() , Point(9.75,12));
    QCOMPARE(loS->getPointOnStartSide(), Point(15, 5));
    loS = eS->getFirstLineOfSightFromStart();
    QCOMPARE(loS->getPointOnEndSide(), Point(9,12));
    QCOMPARE(loS->getPointOnStartSide(), Point(16, 5));
    QCOMPARE(eS->hasSuccessor(), false);
    QCOMPARE(eS->hasPredecessor(), true);
    QCOMPARE(eS->getIndexOfLastSPPointOnEndSide(), 6);
    QCOMPARE(eS->getExtraPointsOnEndSide().size(), 0);
    QCOMPARE(eS->getEndSideLoSVisible(), true);
    QCOMPARE(eS->getEndSideOnPolygonEdge(), false);
    QCOMPARE(eS->getIndexOfLastSPPointOnStartSide(), 3);
    QCOMPARE(eS->getExtraPointsOnStartSide().size(), 0);
    QCOMPARE(eS->getStartSideLoSVisible(), false);
    QCOMPARE(eS->getStartSideOnPolygonEdge(), true);
    delete bC;
}
